<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css?family=Creepster|Text+Me+One" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <title>A Creepy Story</title>
  </head>
  <body>
    <h1>The Basement</h1>
    <p id="story">I knew I shouldn't go there, in that dank, cold little place. But I wanted to find my friend, and he was hiding in the basement.</p>
    
    <button>Get In The Mood</button>
    <div class="textEntry">Type your name here, if you dare: <input type="text" disabled id="name" autocomplete="off" value="Mude-me..."></div>
    <button disabled>Please, Please Don't Click Me</button>
    <button disabled>Tell Me What Happened!</button>
    <audio id="audio" src="http://reboot-me.com/ouch.mp3" type="audio/mpeg"></audio>
  </body>

<script>
  var personName = "";

  let button_array = document.querySelectorAll("button");
  button_array[0].addEventListener("click", goDark);
  button_array[1].addEventListener("click", complainMessage);
  button_array[2].addEventListener("click", finishTheStory);

  document.querySelector("#name").addEventListener("change", function(element){
    typeAndScream();
    personName = element.target.value;
  });

  function complainMessage() {
    alert("I told you not to do that " + personName);
  }

  function typeAndScream() {
    document.getElementById("audio").play();
    personName = document.getElementById("name").value;
  }

  function goDark() {
    var body = document.getElementsByTagName("body")[0];
    if (body.className == "") {
      body.className = "dark";
      document.querySelector("#name").disabled = false;
      button_array.forEach((btn, i) => {
        if(i>0) btn.disabled = false;
      });
    }
    else {
      body.className = "";
      document.querySelector("#name").disabled = true;
      button_array.forEach((btn, i) => {
        if(i>0) btn.disabled = true;
      });
    }
    
  }

  function finishTheStory() {
    document.getElementById("story").innerHTML = "So I carefully searched the damp dungeon. There you are! I grinned a smile with all 98 of my gleaming teeth. Dinner time!";
  }

</script>

</html>